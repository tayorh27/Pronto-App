(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{Zmjw:function(t,e,b){"use strict";b.r(e),b.d(e,"TechJobModule",(function(){return w}));var a=b("tyNb"),i=b("ofXK"),o=b("3Pt+"),c=b("OsiS"),n=b("ZAI4"),r=b("1kSV"),s=b("Wcq6"),d=(b("5x/H"),b("Zs65"),b("EVdn")),l=(b("FlOX"),b("e1J8"),b("4WDQ")),u=b("P9ut"),h=b("fXoL"),f=b("bTqV");function g(t,e){if(1&t){var b=h.Wb();h.Vb(0,"li"),h.Vb(1,"a",14),h.fc("click",(function(){h.Bc(b);var t=e.$implicit;return h.jc(2).displayJobsByStatus(t.name)})),h.Mc(2),h.Ub(),h.Ub()}if(2&t){var a=e.$implicit;h.Cb(2),h.Nc(a.name)}}function p(t,e){if(1&t){var b=h.Wb();h.Vb(0,"tr"),h.Vb(1,"td"),h.Mc(2),h.Ub(),h.Vb(3,"td"),h.Mc(4),h.Ub(),h.Vb(5,"td"),h.Mc(6),h.Ub(),h.Qb(7,"td",22),h.Vb(8,"td"),h.Qb(9,"div",23),h.Mc(10),h.Ub(),h.Vb(11,"td"),h.Mc(12),h.Ub(),h.Vb(13,"td"),h.Mc(14),h.Ub(),h.Vb(15,"td",21),h.Vb(16,"a",24),h.fc("click",(function(){h.Bc(b);var t=e.$implicit;return h.jc(2).editJob(t)})),h.Vb(17,"i",8),h.Mc(18,"edit"),h.Ub(),h.Ub(),h.Ub(),h.Ub()}if(2&t){var a=e.$implicit,i=h.jc(2);h.Cb(2),h.Nc(a[10]),h.Cb(2),h.Nc(a[1]),h.Cb(2),h.Nc(a[2]),h.Cb(1),h.pc("innerHTML",a[8],h.Cc),h.Cb(2),h.pc("ngStyle",i.getStyle(a[4])),h.Cb(1),h.Oc(" ",a[4]," "),h.Cb(2),h.Nc(a[6]),h.Cb(2),h.Nc(a[7])}}function V(t,e){if(1&t){var b=h.Wb();h.Vb(0,"div",3),h.Vb(1,"div",4),h.Vb(2,"div",5),h.Vb(3,"div",6),h.Vb(4,"div",7),h.Vb(5,"i",8),h.Mc(6,"assignment"),h.Ub(),h.Ub(),h.Vb(7,"h4",9),h.Mc(8,"Jobs"),h.Ub(),h.Vb(9,"div",10),h.Vb(10,"button",11),h.Vb(11,"i",8),h.Mc(12,"build"),h.Ub(),h.Vb(13,"span",12),h.Mc(14,"Toggle Job Status"),h.Ub(),h.Ub(),h.Vb(15,"ul",13),h.Vb(16,"li"),h.Vb(17,"a",14),h.fc("click",(function(){return h.Bc(b),h.jc().displayJobsByStatus("All")})),h.Mc(18,"All"),h.Ub(),h.Ub(),h.Kc(19,g,3,1,"li",15),h.Ub(),h.Ub(),h.Ub(),h.Vb(20,"div",16),h.Qb(21,"div",17),h.Vb(22,"div",18),h.Vb(23,"table",19),h.Vb(24,"thead"),h.Vb(25,"tr"),h.Vb(26,"th"),h.Mc(27),h.Ub(),h.Vb(28,"th"),h.Mc(29),h.Ub(),h.Vb(30,"th"),h.Mc(31),h.Ub(),h.Vb(32,"th"),h.Mc(33),h.Ub(),h.Vb(34,"th"),h.Mc(35),h.Ub(),h.Vb(36,"th"),h.Mc(37),h.Ub(),h.Vb(38,"th"),h.Mc(39),h.Ub(),h.Vb(40,"th",20),h.Mc(41),h.Ub(),h.Ub(),h.Ub(),h.Vb(42,"tfoot"),h.Vb(43,"tr"),h.Vb(44,"th"),h.Mc(45),h.Ub(),h.Vb(46,"th"),h.Mc(47),h.Ub(),h.Vb(48,"th"),h.Mc(49),h.Ub(),h.Vb(50,"th"),h.Mc(51),h.Ub(),h.Vb(52,"th"),h.Mc(53),h.Ub(),h.Vb(54,"th"),h.Mc(55),h.Ub(),h.Vb(56,"th"),h.Mc(57),h.Ub(),h.Vb(58,"th",21),h.Mc(59),h.Ub(),h.Ub(),h.Ub(),h.Vb(60,"tbody"),h.Kc(61,p,19,8,"tr",15),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Ub()}if(2&t){var a=h.jc();h.Cb(19),h.pc("ngForOf",a.statuses),h.Cb(8),h.Nc(a.dataTable.headerRow[7]),h.Cb(2),h.Nc(a.dataTable.headerRow[0]),h.Cb(2),h.Nc(a.dataTable.headerRow[1]),h.Cb(2),h.Nc(a.dataTable.headerRow[2]),h.Cb(2),h.Nc(a.dataTable.headerRow[3]),h.Cb(2),h.Nc(a.dataTable.headerRow[4]),h.Cb(2),h.Nc(a.dataTable.headerRow[5]),h.Cb(2),h.Oc(" ",a.dataTable.headerRow[6]," "),h.Cb(4),h.Nc(a.dataTable.footerRow[7]),h.Cb(2),h.Nc(a.dataTable.footerRow[0]),h.Cb(2),h.Nc(a.dataTable.footerRow[1]),h.Cb(2),h.Nc(a.dataTable.footerRow[2]),h.Cb(2),h.Nc(a.dataTable.footerRow[3]),h.Cb(2),h.Nc(a.dataTable.footerRow[4]),h.Cb(2),h.Nc(a.dataTable.footerRow[5]),h.Cb(2),h.Nc(a.dataTable.footerRow[6]),h.Cb(2),h.pc("ngForOf",a.dataTable.dataRows)}}var U=function(t){return{color:t}};function m(t,e){if(1&t){var b=h.Wb();h.Vb(0,"div",4),h.Vb(1,"button",30),h.fc("click",(function(){return h.Bc(b),h.jc(2).cancelViewJob()})),h.Mc(2," Cancel "),h.Ub(),h.Vb(3,"ul",31),h.Vb(4,"li",32),h.Vb(5,"div",33),h.Vb(6,"i",8),h.Mc(7,"work"),h.Ub(),h.Ub(),h.Vb(8,"div",34),h.Vb(9,"div",35),h.Vb(10,"span",36),h.Mc(11,"JOB REQUEST"),h.Ub(),h.Ub(),h.Vb(12,"div",37),h.Vb(13,"p"),h.Mc(14," Comment: "),h.Qb(15,"br"),h.Vb(16,"strong"),h.Mc(17),h.Ub(),h.Ub(),h.Qb(18,"br"),h.Vb(19,"p",38),h.Mc(20," Status: "),h.Qb(21,"br"),h.Vb(22,"strong"),h.Mc(23),h.Ub(),h.Ub(),h.Qb(24,"br"),h.Vb(25,"p"),h.Mc(26,"Request:"),h.Ub(),h.Qb(27,"div",22),h.Ub(),h.Ub(),h.Ub(),h.Vb(28,"li",32),h.Vb(29,"div",39),h.Vb(30,"i",8),h.Mc(31,"handyman"),h.Ub(),h.Ub(),h.Vb(32,"div",34),h.Vb(33,"div",35),h.Vb(34,"span",40),h.Mc(35,"TECHNICIAN INFO"),h.Ub(),h.Ub(),h.Vb(36,"div",37),h.Vb(37,"div",41),h.Vb(38,"div",42),h.Vb(39,"div",43),h.Vb(40,"a",44),h.Qb(41,"img",45),h.Ub(),h.Ub(),h.Vb(42,"div",16),h.Vb(43,"h6",46),h.Mc(44),h.Ub(),h.Vb(45,"h4",9),h.Mc(46),h.Ub(),h.Vb(47,"p",47),h.Mc(48),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Vb(49,"h6"),h.Qb(50,"i",48),h.Mc(51),h.Ub(),h.Ub(),h.Ub(),h.Vb(52,"li",32),h.Vb(53,"div",49),h.Vb(54,"i",8),h.Mc(55,"people"),h.Ub(),h.Ub(),h.Vb(56,"div",34),h.Vb(57,"div",35),h.Vb(58,"span",50),h.Mc(59,"CUSTOMER INFO"),h.Ub(),h.Ub(),h.Vb(60,"div",37),h.Vb(61,"div",41),h.Vb(62,"div",42),h.Vb(63,"div",43),h.Vb(64,"a",44),h.Qb(65,"img",51),h.Ub(),h.Ub(),h.Vb(66,"div",16),h.Vb(67,"h6",46),h.Mc(68),h.Ub(),h.Vb(69,"h4",9),h.Mc(70),h.Ub(),h.Vb(71,"p",47),h.Mc(72),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Vb(73,"h6"),h.Qb(74,"i",48),h.Mc(75),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Qb(76,"br"),h.Vb(77,"button",30),h.fc("click",(function(){return h.Bc(b),h.jc(2).cancelViewJob()})),h.Mc(78," Cancel "),h.Ub(),h.Ub()}if(2&t){var a=h.jc(2);h.Cb(17),h.Nc(a.selectedJob.note),h.Cb(2),h.pc("ngStyle",h.tc(14,U,a.getStatusColorByName(a.selectedJob.status))),h.Cb(4),h.Nc(a.selectedJob.status),h.Cb(4),h.pc("innerHTML",a.displayHTMLCategories(a.selectedJob.category),h.Cc),h.Cb(14),h.qc("src",a.selectedJob.assigned_to.image,h.Dc),h.Cb(3),h.Oc(" ",a.selectedJob.assigned_to.email," "),h.Cb(2),h.Oc(" ",a.selectedJob.assigned_to.phone," "),h.Cb(2),h.Oc(" ",a.selectedJob.assigned_to.address," "),h.Cb(3),h.Pc(" ",a.selectedJob.assigned_to.name," - ",a.selectedJob.assigned_to.status," "),h.Cb(17),h.Oc(" ",a.selectedJob.customer.email," "),h.Cb(2),h.Oc(" ",a.selectedJob.customer.phone," "),h.Cb(2),h.Oc(" ",a.selectedJob.customer.address," "),h.Cb(3),h.Oc(" ",a.selectedJob.customer.name,"")}}function v(t,e){if(1&t&&(h.Vb(0,"tr"),h.Vb(1,"td"),h.Mc(2),h.Ub(),h.Vb(3,"td"),h.Mc(4),h.Ub(),h.Vb(5,"td"),h.Mc(6),h.Ub(),h.Ub()),2&t){var b=e.$implicit,a=e.index;h.Cb(2),h.Nc(a+1),h.Cb(2),h.Nc(b.comment),h.Cb(2),h.Nc(b.created_date)}}function C(t,e){if(1&t&&(h.Vb(0,"div",4),h.Vb(1,"div",16),h.Qb(2,"div",17),h.Vb(3,"div",18),h.Vb(4,"table",52),h.Vb(5,"thead"),h.Vb(6,"tr"),h.Vb(7,"th"),h.Mc(8,"ID"),h.Ub(),h.Vb(9,"th"),h.Mc(10,"COMMENT"),h.Ub(),h.Vb(11,"th"),h.Mc(12,"CREATED DATE"),h.Ub(),h.Ub(),h.Ub(),h.Vb(13,"tfoot"),h.Vb(14,"tr"),h.Vb(15,"th"),h.Mc(16,"ID"),h.Ub(),h.Vb(17,"th"),h.Mc(18,"COMMENT"),h.Ub(),h.Vb(19,"th"),h.Mc(20,"CREATED DATE"),h.Ub(),h.Ub(),h.Ub(),h.Vb(21,"tbody"),h.Kc(22,v,7,3,"tr",15),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Ub()),2&t){var b=h.jc(2);h.Cb(22),h.pc("ngForOf",b.activities)}}function M(t,e){1&t&&(h.Vb(0,"div",3),h.Vb(1,"div",25),h.Vb(2,"ngb-tabset",26),h.Vb(3,"ngb-tab",27),h.Kc(4,m,79,16,"ng-template",28),h.Ub(),h.Vb(5,"ngb-tab",29),h.Kc(6,C,23,1,"ng-template",28),h.Ub(),h.Ub(),h.Ub(),h.Ub()),2&t&&(h.Cb(2),h.pc("justify","center"))}var y=[{path:"",children:[{path:"",component:function(){function t(){this.data=[],this.jobs=[],this.statuses=[],this.categories=[],this.activities=[],this.viewJob=!1,this.config=new l.a,this.button_pressed=!1,this.service=new u.a,this.role="",this.techEmail=localStorage.getItem("email")}return t.prototype.getJobByStatus=function(t){var e=this;s.firestore().collection("jobs").where("assigned_to.email","==",this.techEmail).where("status","==",t).orderBy("timestamp","desc").onSnapshot((function(t){e.data=[],e.jobs=[],t.forEach((function(t){var b=t.data();e.jobs.push(b),e.data.push([b.id,b.assigned_to.name,b.customer.name,b.customer.email,b.status,b.created_by,b.created_date,b.modified_date,e.displayHTMLCategories(b.category),"btn-link",""+b.job_id])})),e.dataTable={headerRow:["Assigned To","Customer","Job Request","Status","Created Date","Modified Date","Actions","ID"],footerRow:["Assigned To","Customer","Job Request","Status","Created Date","Modified Date","Actions","ID"],dataRows:e.data}}))},t.prototype.displayJobsByStatus=function(t){"All"!==t?this.getJobByStatus(t):this.getJob()},t.prototype.getJob=function(){var t=this;s.firestore().collection("jobs").where("assigned_to.email","==",this.techEmail).orderBy("timestamp","desc").onSnapshot((function(e){t.data=[],t.jobs=[],e.forEach((function(e){var b=e.data();t.jobs.push(b),t.data.push([b.id,b.assigned_to.name,b.customer.name,b.customer.email,b.status,b.created_by,b.created_date,b.modified_date,t.displayHTMLCategories(b.category),"btn-link",""+b.job_id])})),t.dataTable={headerRow:["Assigned To","Customer","Job Request","Status","Created Date","Modified Date","Actions","ID"],footerRow:["Assigned To","Customer","Job Request","Status","Created Date","Modified Date","Actions","ID"],dataRows:t.data}}))},Object.defineProperty(t.prototype,"totalRows",{get:function(){return this.getJob.length},enumerable:!1,configurable:!0}),t.prototype.getStatus=function(){var t=this;s.firestore().collection("status").orderBy("name","asc").get().then((function(e){t.statuses=[],e.forEach((function(e){var b=e.data();t.statuses.push(b)}))}))},t.prototype.getStatusColorByName=function(t){return this.statuses.find((function(e,b,a){return e.name===t})).color},t.prototype.getCategories=function(){var t=this;s.firestore().collection("categories").orderBy("name","desc").onSnapshot((function(e){if(t.categories=[],e.forEach((function(e){var b=e.data();t.categories.push(b)})),""===location.search)t.getJob();else{var b=location.search.substring(3);t.getJobByStatus(b)}}))},t.prototype.getStyle=function(t){return{background:""+this.getStatusColorByName(t),width:"20px",height:"20px","border-radius":"10px"}},t.prototype.ngOnInit=function(){var t=this,e=localStorage.getItem("email");this.service.getUserData(e).then((function(e){t.role=e.role,t.getCategories(),t.getStatus()}))},t.prototype.getCategoryNameById=function(t){return this.categories.find((function(e,b,a){return e.id===t})).name},t.prototype.displayHTMLCategories=function(t){var e=this,b="<ul>";return t.forEach((function(t){var a=e.getCategoryNameById(t);b+=void 0===a?"":"<li><strong>"+a+"</strong></li>"})),b+="</ul>"},t.prototype.editJob=function(t){this.selectedJob=this.jobs.find((function(e,b,a){return e.id===t[0]})),this.viewJob=!0,this.getJobActivities()},t.prototype.getJobActivities=function(){var t=this;s.firestore().collection("jobs").doc(this.selectedJob.id).collection("activities").orderBy("timestamp","desc").onSnapshot((function(e){t.activities=[],e.forEach((function(e){var b=e.data();t.activities.push(b)}))}))},t.prototype.cancelViewJob=function(){this.viewJob=!1,this.selectedJob=null},t.prototype.ngAfterViewInit=function(){this.tableSearch()},t.prototype.tableSearch=function(){d("#datatables").DataTable({pagingType:"full_numbers",lengthMenu:[[10,25,50,-1],[10,25,50,"All"]],responsive:!0,language:{search:"_INPUT_",searchPlaceholder:"Search records"}}),d("#datatables").DataTable(),d(".card .material-datatables label").addClass("form-group")},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=h.Jb({type:t,selectors:[["app-tech-job"]],decls:4,vars:2,consts:[[1,"main-content"],[1,"container-fluid"],["class","row",4,"ngIf"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header","card-header-primary","card-header-icon"],[1,"card-icon"],[1,"material-icons"],[1,"card-title"],[1,"dropdown","pull-left"],["mat-raised-button","","type","button","data-toggle","dropdown",1,"btn","btn-round","btn-info","dropdown-toggle"],[1,"caret"],["role","menu",1,"dropdown-menu","dropdown-menu-right"],["href","javascript:void(0)",3,"click"],[4,"ngFor","ngForOf"],[1,"card-body"],[1,"toolbar"],[1,"material-datatables"],["id","datatables","cellspacing","0","width","100%",1,"table","table-striped","table-no-bordered","table-hover",2,"width","100%"],[1,"disabled-sorting","text-right"],[1,"text-right"],[3,"innerHTML"],[3,"ngStyle"],["href","javascript:void(0)","data-toggle","tooltip","title","view","data-placement","bottom",1,"btn","btn-link","btn-warning","btn-just-icon","edit",3,"click"],[1,"col-lg-12"],["type","pills",1,"custom-tab-content","flex-column","flex-md-row",3,"justify"],["title","INFORMATION"],["ngbTabContent",""],["title","ACTIVITIES"],["mat-raised-button","","type","button",1,"btn","btn-round","btn-danger",3,"click"],[1,"timeline","timeline-simple"],[1,"timeline-inverted"],[1,"timeline-badge","info"],[1,"timeline-panel"],[1,"timeline-heading"],[1,"badge","badge-info"],[1,"timeline-body"],["id","stat",3,"ngStyle"],[1,"timeline-badge","success"],[1,"badge","badge-success"],[1,"col-md-4"],[1,"card","card-profile"],[1,"card-avatar"],["href","javascript:void(0)"],[1,"img",3,"src"],[1,"card-category","text-gray"],[1,"card-description"],[1,"ti-time"],[1,"timeline-badge","danger"],[1,"badge","badge-danger"],["src","assets/img/default-avatar.png",1,"img"],["id","datatables2","cellspacing","0","width","100%",1,"table","table-striped","table-no-bordered","table-hover",2,"width","100%"]],template:function(t,e){1&t&&(h.Vb(0,"div",0),h.Vb(1,"div",1),h.Kc(2,V,62,18,"div",2),h.Kc(3,M,7,1,"div",2),h.Ub(),h.Ub()),2&t&&(h.Cb(2),h.pc("ngIf",!e.viewJob),h.Cb(1),h.pc("ngIf",e.viewJob))},directives:[i.m,f.b,i.l,i.n,r.e,r.c,r.d],styles:[""]}),t}()}]}],w=function(){function t(){}return t.\u0275mod=h.Nb({type:t}),t.\u0275inj=h.Mb({factory:function(e){return new(e||t)},imports:[[i.c,a.g.forChild(y),o.l,c.a,n.b,r.b]]}),t}()}}]);